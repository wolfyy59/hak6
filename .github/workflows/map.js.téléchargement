var osm = L.tileLayer("https://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}", {
  maxZoom: 20,
  subdomains: ["mt0", "mt1", "mt2", "mt3"],
  attribution:
    '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
});

var map = L.map("map", {
  center: [36, 3],
  zoom: 6,
  attributionControl: false,
  doubleClickZoom: false,
  dragging: true,
  layers: [osm],
}).invalidateSize();

var myIcon = L.icon({
  iconUrl: "assets/css/images/marker-icon-onta.png",
  iconSize: [30, 41],
  iconAnchor: [15, 41],
  popupAnchor: [0, -41],
  shadowUrl: "assets/css/images/marker-shadow.png",
  shadowSize: [41, 41],
  shadowAnchor: [12, 41],
});
var couche_onta = L.geoJson(null, {
  pointToLayer: function (feature, latlng) {
    return L.marker(latlng, { icon: myIcon });
  },
  onEachFeature: function (feature, layer) {
    layer.bindPopup(
      "<p><b>" +
        feature.properties.Wilaya +
        "</b><br>" +
        feature.properties.Adresse +
        "<br>" +
        feature.properties.Numero_telephone +
        "</p>"
    );
    layer.on({
      click: function (e) {},
    });
    layer.on({
      mouseover: function (e) {},
    });
  },
}).addTo(map);
$.getJSON("assets/map/map.geojson", function (geojson) {
  couche_onta.addData(geojson);
});

L.marker([36.647272, 3.004529], { icon: myIcon })
  .addTo(map)
  .bindPopup(
    "<p><b>DIRECTION GENERALE</b><br>Rue Ali Bouhadja, Birtouta 16045<br>023 40 16 82</p>"
  );

$("#myModal").on("shown.bs.modal", function () {
  setTimeout(function () {
    map.invalidateSize();
  }, 10);
});
